 @model F4ConversationCloud.ClientAdmin.Models.CampaignViewModel.CreateCampaignViewModel;
@{
    ViewData["Title"] = "Create Campaign";
}
<div class="container-fluid">
    <h3 class="sub-heading"><a href="#" class="back"></a>Edit Broadcast Campaign</h3>

    <div class="broadcast-tabs tab-spacing">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="details-tab" data-bs-toggle="tab"
                        data-bs-target="#details" type="button" role="tab" aria-controls="details"
                        aria-selected="true">
                    01 Broadcast Details
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link " id="audience-tab" data-bs-toggle="tab" data-bs-target="#audience"
                        type="button" role="tab" aria-controls="audience" aria-selected="false">
                    02
                    Audience
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="template-tab" data-bs-toggle="tab" data-bs-target="#template"
                        type="button" role="tab" aria-controls="template" aria-selected="false">
                    03
                    Template
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="preview-tab" data-bs-toggle="tab" data-bs-target="#preview"
                        type="button" role="tab" aria-controls="preview" aria-selected="false">
                    04
                    Preview
                </button>
            </li>
        </ul>
        <form asp-action="CreateCampaign" method="post" id="mainForm">
            <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="details" role="tabpanel"
                    aria-labelledby="details-tab">
                        <partial name="_BroadcastDetailsPartial" model="@Model" />
                    </div>
              
                    <div class="tab-pane fade " id="audience" role="tabpanel" aria-labelledby="audience-tab">
                        <partial name="_AudiencePartial" model="@Model" />
                    </div>
             
                    <div class="tab-pane fade " id="template" role="tabpanel" aria-labelledby="template-tab">
                        <partial name="_TemplateListPartial" model="@Model" />
                    </div>
             
                    <div class="tab-pane fade" id="preview" role="tabpanel" aria-labelledby="preview-tab">
                        <partial name="_PreviewCampaignPartial" model="@Model" />
                    </div>
             
            </div>
        </form>
    </div>
</div>

@section Scripts {
   @*  <partial name="_ValidationScriptsPartial" /> *@
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>

    <script>
        $(document).ready(function() {
            var req = @Html.Raw(Json.Serialize(Model));
           
            
            
             $(document).on('click', '#details-btn', function (e) {
                  e.preventDefault();
                  const form = $("#campaigname").valid();

                    if (!form) {
                        // form.validate().focusInvalid();
                         return false; 
                     }
                    
                 const NextTab = "Audience";
                    var req = {
                        NextTabName: NextTab
                };
                var url = "@Url.ActionLink("GetCampaignFlowTabPartialView", "Campaigns")";
                ajaxHelper.ajaxPost(url, null, req, function (response) {
                     console.log(response)
                        // $('#details').html(response);
                          $('#audience').addClass('show active');
                           $('#audience-tab').addClass('active');
                            $('#details-tab').removeClass('active');
                             $('#details').removeClass('show active');
                    // $('#preview').removeClass('show active');
                    // $('#template').removeClass('show active');
                    // $('#audience').addClass('show active');
                    // $('#details').removeClass('show active');
                    // $('#details-tab').removeClass('active');
                    // $('#audience-tab').addClass('active');
                    // $('#template-tab').removeClass('active');
                    // $('#preview-tab').removeClass('active');

                }, null);
            });
            $(document).on('click', '#audience-btn', function (e) {
                 e.preventDefault();
              
 
                const NextTab = "Template";
                    var req = {
                        NextTabName: NextTab
                };
                var url = "@Url.ActionLink("GetCampaignFlowTabPartialView", "Campaigns")";
                ajaxHelper.ajaxPost(url, null, req, function (response) {
                         $('#preview').removeClass('show active');
                         $('#template').addClass('show active');
                        $('#audience').removeClass('show active');
                         $('#details').removeClass('show active');
                        $('#details-tab').removeClass('active');
                        $('#audience-tab').removeClass('active');
                        $('#template-tab').addClass('active');
                        $('#preview-tab').removeClass('active');

                }, null);

            });
              
             
       });
    </script>

}