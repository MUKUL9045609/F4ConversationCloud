@model F4ConversationCloud.SuperAdmin.Models.ClientManagementViewModel

<div class="table-responsive">
    <table class="table user-table form-wrapper">
        <thead>
            <tr>
                <th>@Html.DisplayNameFor(model => model.Columns.SrNo)</th>
                <th>
                    @Html.DisplayNameFor(model => model.Columns.PhoneNumber)
                    <div class="input-group">
                        <input type="text" asp-for="PhoneNumberFilter" class="form-control srcIcon" placeholder="Search" id="searchInput">
                        <span class="searchIcon" onclick="loadData()"></span>
                    </div>
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Columns.ClientName)
                    <div class="input-group">
                        <input type="text" asp-for="ClientNameSearch" class="form-control srcIcon" placeholder="Search" id="searchInput">
                        <span class="searchIcon" onclick="loadData()"></span>
                    </div>
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Columns.CreatedAt)
                    <label class="datewrap" for="datepicker">
                        <input type="date" asp-for="OnboardingOnFilter"
                               class="form-control search-form-control"
                               placeholder="Select Date" onchange="loadData()" />
                    </label>
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Columns.Status)
                    <select asp-for="StatusFilter" class="form-select" onchange="loadData()">
                        <option value="" selected>Select Status</option>
                        <option value="Pending">Pending</option>
                        <option value="Connected">Connected</option>
                        <option value="Offline">Offline</option>
                    </select>
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Columns.WabaAccountStatus)
                    <select asp-for="WabaAccountStatusFilter" id="WabaAccountStatusFilter" class="form-select" onchange="loadData()">
                        <option value="2" selected>Account Status</option>
                        <option value="1">Enabled</option>
                        <option value="0">Disabled</option>

                    </select>

                </th>
            </tr>
        </thead>
        <tbody>
            @if (!Model.data.Any())
            {
                <tr>
                    <td colspan="6" class="text-center">No Records Found</td>
                </tr>
            }
            else
            {
                @foreach (var item in Model.data)
                {
                    <tr>
                        <td>@Html.DisplayFor(modelItem => item.SrNo)</td>
                        <td>
                            <form method="get" action="@Url.Action("ClientDetails", "ClientManagement", new { id = item.Id })">
                                <a method="get" asp-controller="ClientManagement" asp-action="ClientDetails" asp-route-id="@item.Id" id="name-link">@Html.DisplayFor(modelItem => item.PhoneNumber)</a>
                            </form>
                            <span class="buisness-category"><span class="fw-medium">Category :</span> @Html.DisplayFor(modelItem => item.Category)</span>
                            @* <span class="buisness-category"><span class="fw-medium">Client Id :</span> @Html.DisplayFor(modelItem => item.ClientId)</span> *@
                        </td>
                        <td>
                            @Html.DisplayFor(modelItem => item.ClientName)
                        </td>
                        <td>
                            <span class="date">@item.CreatedAt.ToString("dd MMM yyyy")</span>
                            <span class="datetime">at @item.CreatedAt.ToString("hh:mm tt")</span>
                        </td>
                        <td><span class="badge @(item.Status == "CONNECTED" ? "success" : "warning")">@Html.DisplayFor(modelItem => item.Status)</span></td>
                        <td>
                            <div class="action">
                                <div class="form-check form-switch">
                                   
                                        <input type="checkbox"
                                               class="form-check-input account-status-switch"
                                               data-id="@item.Id"
                                               data-currentstatus="@item.IsActive"
                                                data-bussinessName="@item.ClientName"
                                               id="flexSwitchCheckChecked_@item.Id"
                                                @(item.IsActive ==1 ? "checked" : "") />

                                   
                                   


                                </div>
                            </div>
                        </td>
                    </tr>
                }
            }
        </tbody>
    </table>
</div>
<div class="modal fade confirmation-modal" id="AccountStatusModal" aria-labelledby="AccountStatusModalLabel" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body">
                <span class="delete-icon"></span>
                <div class="d-flex justify-content-center">
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    <h3>Are You sure?</h3>
                </div>
                <p id="deleteModalText">Do you really want to  Deactivate This Bussiness Account?</p>

                <div class="d-flex justify-content-center gap-2 mt-3">
                    <button type="button" id="ConfirmDeleteBtn" class="btn primary-btn">Yes</button>
                    <button type="button" class="btn danger-btn" data-bs-dismiss="modal">Cancel</button>
                </div>
            </div>
        </div>
    </div>
</div>
<partial name="_Pagination" model="new PaginationViewModel { PageNumber = Model.PageNumber, PageSize = Model.PageSize, TotalCount = Model.TotalCount }" />